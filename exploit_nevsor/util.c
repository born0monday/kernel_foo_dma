#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

void check_error(int error_code, const char *err_message)
{
    if(error_code < 0) {
        perror(err_message);
        exit(error_code);
    }
}

void panic(const char *message)
{
    perror(message);
    exit(-1);
}

void hexdump(char* addr, size_t len)
{
    const size_t line_size=32;
    const size_t group_by = 8;
    size_t off = 0;
    int64_t rem = len;
    printf("hexdump@%p:\n",addr);
    while(rem)
    {
        printf("+0x%04lx:", off);
        for(int l_cnt=0; l_cnt<line_size && rem; l_cnt++,off++,rem--)
        {
            if((l_cnt%group_by)==0)
                printf(" ");
            printf("%02hhx", addr[off]);
        }
        printf("\n");
    }
}